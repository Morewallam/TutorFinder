<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <meta charset="utf-8" />
    <title>Tutor Finder</title>
    <link rel="stylesheet" type="text/css" href="Style/Style.css" />

    <!------------------------------------------------------------------------------>
    <!-- Add Firebase products that you want to use                               -->
    <!------------------------------------------------------------------------------>
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-firestore.js"></script>
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

    <!------------------------------------------------------------------------------>
    <!-- Optional styles and scripts of your own                                  -->
    <!------------------------------------------------------------------------------>
    <!-- <link rel="stylesheet" href="styles/style.css">
    <script src="scripts/script.js"></script> -->

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyDwW0SxAa7rQNtirqtI7U1UQkOAudflZWQ",
            authDomain: "project-8839510588664178667.firebaseapp.com",
            databaseURL: "https://project-8839510588664178667.firebaseio.com",
            projectId: "project-8839510588664178667",
            storageBucket: "project-8839510588664178667.appspot.com",
            messagingSenderId: "1096535957963",
            appId: "1:1096535957963:web:258193868d1cfda790964e",
            measurementId: "G-WS6MMHK5X8"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        // firebase.analytics();
        var db = firebase.firestore();

    </script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="./index.html">
            <img src="Images/Logo.png" width="30" height="30" class="d-inline-block align-top" alt="" />
            Tutor Finder
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="./index.html">Home</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="./tutorSelector.html">Find a Tutor<span
                            class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./login.html">Login</a>
                </li>
            </ul>
        </div>
    </nav>
    <form class="form-inline">
        <i class="fas fa-search" aria-hidden="true"></i>
        <input class="form-control form-control-sm ml-3 w-75" type="text" placeholder="Search" aria-label="Search" />
    </form>
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Prefrences
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
            <button class="dropdown-item" type="button">Price</button>
            <button class="dropdown-item" type="button">Subject</button>
        </div>
    </div>

    <img src="Images/blank_pp.png" class="ppLarge">
    <h1><span id="name"></span></h1>
    <h5><span id="price"></span></h5>
    <h5><span id="subject"></span></h5>
    <h5><span id="rating"></span></h5>
    <h5><span id="contact"></span></h5>
    <!-- <input type="button" value="Book Appoitment" href="./Booking.html" /> -->
    <!-- <button class="nav-link" type="button" href="./Booking.html" >Book Appoitment</button> -->
    <button type="button" class="btn btn-link"><a href="./Booking.html">Book Appoitment</a></button>

    <!-- <h6>Reviews</h6>
    <div>Great guy review comment</div> -->

    <script>
        var name = window.location.href
        var url = new URL(name);
        var query_string = url.search;

        var search_params = new URLSearchParams(query_string);

        var tutor = search_params.get('tutor');

        // output : jim
        console.log(tutor);
        document.getElementById("name").innerHTML = tutor;

        
        // var name = window.location.href
        // db.collection("Tutors").where("name", "==", tutor).limit(1)
        //     .onSnapshot(function (c) {
        //         // console.log("Current data: ", c.data());
        //         document.getElementById("name").innerHTML = c.data().name;
        //     })
        db.collection("Tutors").doc("JROwhxxphyBjyuVjf51T")
            .onSnapshot(function (c) {
                // console.log("Current data: ", c.data());
                document.getElementById("price").innerHTML = "Price: $" + c.data().price + "/h";
            })
        db.collection("Tutors").doc("JROwhxxphyBjyuVjf51T")
            .onSnapshot(function (c) {
                // console.log("Current data: ", c.data());
                document.getElementById("subject").innerHTML = "Subject: " + c.data().subject;
            })
        db.collection("Tutors").doc("JROwhxxphyBjyuVjf51T")
            .onSnapshot(function (c) {
                // console.log("Current data: ", c.data());
                document.getElementById("rating").innerHTML = "Rating: " + c.data().rating;
            })
        db.collection("Tutors").doc("JROwhxxphyBjyuVjf51T")
            .onSnapshot(function (c) {
                // console.log("Current data: ", c.data());
                document.getElementById("rating").innerHTML = "Contact: " + c.data().contact;
            })
    </script>


</body>

</html>