<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <meta charset="utf-8" />
  <title>Tutor List</title>
  <link rel="stylesheet" type="text/css" href="Style/Style.css" />

  <!------------------------------------------------------------------------------>
  <!-- Add Firebase products that you want to use                               -->
  <!------------------------------------------------------------------------------>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-firestore.js"></script>
  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

  <!------------------------------------------------------------------------------>
  <!-- Optional styles and scripts of your own                                  -->
  <!------------------------------------------------------------------------------>
  <!-- <link rel="stylesheet" href="styles/style.css">
  <script src="scripts/script.js"></script> -->

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyDwW0SxAa7rQNtirqtI7U1UQkOAudflZWQ",
      authDomain: "project-8839510588664178667.firebaseapp.com",
      databaseURL: "https://project-8839510588664178667.firebaseio.com",
      projectId: "project-8839510588664178667",
      storageBucket: "project-8839510588664178667.appspot.com",
      messagingSenderId: "1096535957963",
      appId: "1:1096535957963:web:258193868d1cfda790964e",
      measurementId: "G-WS6MMHK5X8"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    // firebase.analytics();
    var db = firebase.firestore();

  </script>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="./index.html">
      <img src="Images/Logo.png" width="30" height="30" class="d-inline-block align-top" alt="" />
      Tutor Finder
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="./index.html">Home</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="./tutorSelector.html">Find a Tutor<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./login.html">Login</a>
        </li>
      </ul>
    </div>
  </nav>
  <form class="form-inline">
    <i class="fas fa-search" aria-hidden="true"></i>
    <input class="form-control form-control-sm ml-3 w-75" type="text" placeholder="Search" aria-label="Search" />
  </form>
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false">
      Prefrences
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
      <button class="dropdown-item" type="button">Price</button>
      <button class="dropdown-item" type="button">Subject</button>
    </div>
  </div>
  <h2>Tutors</h2>
  <div class="container">
    <div class="row">
      <div class="col-lg-4 first">
        <img src="Images/blank_pp.png" class="pp">
        <button type="button" class="btn btn-link"><a id="first" href="./tutorProfile.html"><span
              class="name"></span></a></button>
        <div class="bio">
          <div><span class="price"></span></div>
          <div><span class="subject"></span></div>
        </div>
      </div>
      <div class="col-lg-4 second">
        <img src="Images/blank_pp.png" class="pp">
        <button type="button" class="btn btn-link"><a id="second" href="./tutorProfile.html"><span
              class="name"></span></a></button>
        <div class="bio">
          <div><span class="price"></span></div>
          <div><span class="subject"></span></div>
        </div>
      </div>
      <div class="col-lg-4 third">
        <img src="Images/blank_pp.png" class="pp">
        <button type="button" class="btn btn-link"><a id="third" href="./tutorProfile.html"><span
              class="name"></span></a></button>
        <div class="bio">
          <div><span class="price"></span></div>
          <div><span class="subject"></span></div>
        </div>
      </div>
    </div>
  </div>

  <script>

    var tutorsName = document.getElementsByClassName("name");
    var tutorsPrice = document.getElementsByClassName("price");
    var tutorsSubject = document.getElementsByClassName("subject");
    i = 0;
    //first tutor 
    db.collection("Tutors")
      .orderBy("rating")
      .limit(3)
      .get()
      .then(function (querySnapshot) {
        querySnapshot.forEach(function (doc) {
          tutorsName[i].innerHTML = doc.data().name;
          tutorsPrice[i].innerHTML = "Price: $" + doc.data().price + "/h";
          tutorsSubject[i].innerHTML = "Subject: " + doc.data().subject;
          i++;
        });
        i == 0;
      });

    $("#first").click(function (event) {
      event.preventDefault();
      queryString = document.getElementsByClassName("name");
      window.location.href = "./tutorProfile.html?tutor=" + queryString[0].innerHTML;
    });

    $("#second").click(function (event) {
      event.preventDefault();
      queryString = document.getElementsByClassName("name");
      window.location.href = "./tutorProfile.html?tutor=" + queryString[1].innerHTML;
    });

    $("#third").click(function (event) {
      event.preventDefault();
      queryString = document.getElementsByClassName("name");
      window.location.href = "./tutorProfile.html?tutor=" + queryString[2].innerHTML;
    });
//^^^^^^^^^^^^^^^^^^^^^^ASSIGNS PROPER TUTOR NAME VARIABLE TO URL DEPENDING ON NAME CLICKED^^^^^^^^^^^^^^^^^^^^



firebase.auth().onAuthStateChanged(function (user) {
      if (user) {
        console.log("Logged in as" + user);
      } else {
        console.log("not logged in");
        document.getElementById('notifylogin').innerHTML = "LOGIN to book appoitments";
      }
    });
  </script>

</body>

</html>